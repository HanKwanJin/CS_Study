# 메모리 계층 
메모리 계층은 레지스터, 캐시, 메모리, 저장장치로 구성되어 있다. 

![image](https://velog.velcdn.com/images/developer-sora/post/dc6b4357-f8bd-46b0-a458-ea327bd53203/image.png)

- **레지스터** : CPU 안에 있는 작은 메모리. 휘발성, 속도 가장 빠름, 기억 용량이 가장 적음
- **캐시** : L1, L2 캐시를 지칭. 휘발성, 속도 빠름, 기억 용량 적음
- **주기억장치** : RAM을 지칭. 휘발성, 속도 보통, 기억 용량 보통 
- **보조기억장치** : HDD, SDD를 일컬으며 비휘발성, 속도 낮음, 기억 용량 많음

계층이 위로 올라갈수록 용량이 작아지고 속도가 빨라지므로 가격도 비싸진다. 
<br>
<br>

## 계층이 존재하는 이유 
**경제성과 캐시성** 때문이다. 
<br>ex) 16GB RAM은 8만원이면 살 수 있다. 하지만 16GB SSD는 훨씬 더 싼 가격에 살 수 있다. 이러한 경제성 때문에 계층을 두어 관리하는 것이다. 
#
<br>

## 캐시
데이터를 미리 복사해 놓는 임시 저장소이자 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리
<br>
-> 이를 통해 데이터를 접근하는 시간이 오래 걸리는 경우를 해결하고 무언가를 다시 계산하는 시간을 절약할 수 있음

- **캐싱**
: 속도 차이를 해결하기 위해 계층과 계층 사이에 있는 계층 
<br> -> 예를 들어 캐시 메모리와 보조기억장치 사이에 있는 주기억장치를 보조기억장치의 캐싱 계층이라한다. 

- **지역성**
: 데이터 접근이 시간적, 혹은 공간적으로 가깝게 일어나는 것
    - 시간 지역성 : 최근 사용한 데이터에 다시 접근하려는 특성 
    <br>ex) for문의 변수 i 
    - 공간 지역성 : 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하는 특성
    <br>ex) for문 안의 배열
<br>
<br>

- **캐시히트와 캐시미트**
    <br> 캐시에서 원하는 데이터를 찾았다면 캐시히트라고 하며,
해당 데이터가 캐시에 없다면 주메모리로 가서 데이터를 찾아오는 것을 캐시미스라고 한다. 

    ![image](https://velog.velcdn.com/images/developer-sora/post/f3b7e91e-a41a-472a-a14e-5cd75f8e78c8/image.png) 
    <br> 캐시히트의 경우 데이터를 제어장치를 거쳐 가져오게 되는데, *CPU 내부 버스*를  기반으로 작동하기 때문에 빠르다. <br> 반면 캐시미스의 경우 메모리에서 가져오게 되는데, 이는 *시스템 버스*를 기반으로 작동하기 때문에 느리다.



- **웹 브라우저의 캐시** 
<br>웹 브라우저의 캐시는 보통 사용자의 커스텀 정보나 인증 모듈 관련 사항들을 웹 브라우저에 저장해서 추후 서버에 요청할 때 자신을 나타내는 아이덴티티나 중복 요청 방지를 위해 쓰인다.
    |종류|만료기한|저장 공간|사용처|
    |---|---|---|---|
    |쿠키|있음|4KB|다시 보지 않음 팝업|
    |로컬 스토리지|없음|5MB|자동 로그인|
    |세션 스토리지|없음|5MB|비로그인 장바구니|

    - 로컬 스토리지와 세션 스토리지의 차이점
    <br> 로컬 스토리지는 웹 브라우저를 닫아도 유지되고, 세션 스토리지는 탭을 닫을 때 해당 데이터가 삭제된다.
<br> <br>
- **데이터베이스의 캐싱 계층** 
<br>데이터베이스 시스템을 구축할 때 메인 데이터베이스 위에 레디스(redis) 데이터베이스 계층을 **캐싱 계층**으로 두어 성능을 향상시키기도 한다. 

    ![image](https://velog.velcdn.com/images/developer-sora/post/0d5ef870-98a3-40e2-a0fd-35b80839421e/image.png)