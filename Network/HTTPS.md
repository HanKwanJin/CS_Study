# HTTPS란?

먼저 HTTP란 HyperText Transfer Protocol의 약자로, 하이퍼텍스트를 전송하기 위해 사용되는 통신 규약입니다. HTTPS는 애플리케이션 계층과 전송 계층 사이에 신뢰 계층인 SSL/TLS 계층을 넣은 신뢰할 수 있는 HTTP 요청입니다. HTTPS를 사용하면 **서버와 클라이언트 사이의 모든 통신 내용이 암호화**됩니다. 추가로 HTTP/2는 HTTPS 위에서 동작합니다.

## SSL/TLS

SSL/TLS는 전송 계층에서 보안을 제공하는 프로토콜입니다. 서버와 클라이언트가 통신할 때 SSL/TLS를 통해 제 3자가 메시지를 도청하거나 변조하지 못하도록 합니다.

## 동작 과정

공개키 암호화 방식과 공개키 방식이 느리다는 단점을 보완한 대칭키 암호화 방식을 함께 사용합니다. 공개키 방식으로 대칭키를 전달하고, 서로 공유된 대칭키를 가지고 통신하게 됩니다.

### 공개키 방식

- A키로 암호화를 하면 B키로 복호화 할 수 있습니다.

- B키로 암호화를 하면 A키로 복호화 할 수 있습니다.

- 둘 중 하나를 비공개키 혹은 개인키라 불리며 이는 자신만 가지고 있고 공개되지 않습니다.

- 나머지 하나는 공개키라 불리며 타인에게 제공합니다. 공개키는 유출이 되어도 비공개키를 모르면 복호화 할 수 없기 때문에 안전합니다.

### 대칭키 방식

- 암호화를 할 때 사용하는 비밀번호를 키라고 합니다. 대칭키는 동일한 키로 암호화, 복호화가 가능합니다.

- 대칭키는 매번 랜덤으로 생성되어 누출되어도 다음번에 사용할 때에는 다른 키가 사용되기 때문에 안전합니다.

- 공개키보다 빠르게 통신할 수 있습니다.

이러한 방식을 적용하려면 인증서를 발급받아서 서버에 적용시켜야 합니다. 인증서는 사용자가 접속한 서버가 우리가 의도한 서버가 맞는지를 보장하는 역할을 합니다. 이러한 인증서를 발급하는 기관을 CA(Certificate authority)라고 부릅니다. 


### 인증서 발급 과정

<img src="https://t1.daumcdn.net/cfile/tistory/99F0FA445C456BB809">

1. 인터넷 사이트는 자신의 정보와 공개키를 인증기관에 제출합니다.

2. 인증기관은 제출된 데이터 검증절차를 거쳐 개인키로 사이트에서 제출한 정보를 암호화 한 뒤 인증서를 발급합니다.

3. 인증기관은 웹 브라우저에게 자신의 공개키를 제공합니다.

### 사용자가 사이트에 접속할 경우

<img src="https://t1.daumcdn.net/cfile/tistory/993364345C457AED30">

1. 사용자가 사이트에 접속하면 자신의 인증서를 웹 브라우저에게 보냅니다.

2. 웹 브라우저는 미리 받았던 인증기관의 공개키로 인증서를 해독하여 검증합니다. 그러면 사이트의 정보와 사이트의 공개키를 알 수 있게 됩니다.

3. 이렇게 얻은 사이트 공개키로 대칭키를 암호화해서 다시 사이트에 보냅니다.

4. 사이트는 개인키로 암호문을 해독하여 대칭키를 얻게 되고, 이제 대칭키로 데이터를 주고받을 수 있게 됩니다.

5. 세션이 종료되면 대칭키는 폐기됩니다.

<br><br>
>**[Reference]**<br>
https://devdy.tistory.com/14