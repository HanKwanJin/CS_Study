# 계층 간 송수신 과정
```
컴퓨터를 통해 다른 컴퓨터로 데이터를 요청한다면?<br>
-> HTTP를 통해 웹 서버에 있는 데이터를 요청한다면?

어떤 일이 일어나는지에 대하여 입니다.
```
![image](https://thebook.io/img/080326/094_1.jpg)

애플리케이션 계층에서 전송 걔층으로 보내는 요청(request) 값들이 ***캡슐화 과정***을 거쳐 전달되고, 다시 링크 계층을 통해 해당 서버와 통신을 하고, 해당 서버의 링크 계층으로부터 애플리케이션까지 ***비캡슐화 과정***을 거쳐 데이터가 전송됨


---
## **간단한 복습**

### 애플리케이션 계층
- FTP, HTTP, SSH, SMTP, DNS 등등
- 응용 프로그램이 사용되는 프로토콜 계층
- 웹 서비스나 이메일 등 서비스를 실질적으로 사람들에게 제공하는 단계
<br><br>
- FTP : 장치와 장치간의 파일을 전송하는 데 사용되는 표준 프로토콜
- SSH : 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
- HTTP : WWW를 위한 데이터 통신의 기초이자 웹 사이트를 이용하는데 사용하는 프로토콜
- DNS : 도메인 이름과 IP 주소를 매핑해주는 서버 -> IP 주소가 바뀌어도 사용자들에게 똑같은 도메인 주소로 서비스

### 전송계층
- 송신자와 수신자를 연결하는 통신 서비스 제공
- 연결 지향 데이터 스트림, 신뢰성, 흐름 제어 지원
- 애플리케이션과 인터넷 계층 사이 데이터가 전달될 때의 중계 역할
<br><br>
예로는 TCP, UDP가 있다.
- TCP
    - 패킷 사이의 순서를 보장
    - 연결 지향 프로토콜로 연결해 신뢰성을 구축하고 수신 여부를 확인
    - 가상회선 패킷 교환 방식 사용
- UDP
    - 순서를 보장하지 않음
    - 수신 여부를 확인하지 않고, 단순히 데이터만 줌
    - 데이터그램 패킷 교환 방식 사용

### 인터넷 계층
- 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층
- IP, ARP, ICMP 등등
- 패킷을 수신해야 할 상대의 주소를 지정해 데이터를 전달
- 상대방이 제대로 받았는지에 대해 보장하지 않는 비연결형적인 특징을 가지고 있음

### 링크 계층(network access)
- 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하고, 장치 간에 신호를 주고 받는 규칙을 정하는 계층 -> **네트워크 접근 계층**
- 물리 계층과 데이터 링크 계층으로 나뉘어진다.
    - 물리 계층
        - 무선 LAN / 유선 LAN을 통해 0,1로 이루어진 데이터를 보냄
    - 데이터 링크 계층
        - 이더넷 프레임을 통해 에러 확인 / 흐름 제어 / 접근 제어 담당
---

## 캡슐화 과정
상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고, 해당 계층의 헤더를 삽입하는 과정

![image](https://thebook.io/img/080326/094_2.jpg)

1. 애플리케이션 계층의 데이터가 전송 계층으로 전달되면서 "**세그먼트 또는 데이터그램**"화 되며 TCP(L4) 헤더가 붙음
2. 인터넷 계층으로 가면서 IP(L3) 헤더가 붙여지며 "**패킷**"화 됨
3. 링크 계층으로 전달되면서 프레임 헤더와 프레임 트레일러가 붙어 "**프레임**"화 됨

## 비캡슐화 과정
하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부분을 제거하는 과정

![image](https://thebook.io/img/080326/095.jpg)

1. 링크 계층에서 프레임화된 데이터를 패킷화
2. 세그먼트, 데이터 그램화
3. 메시지화

즉, 캡슐화의 역순으로 생각하면 된다.<br><br>
### ***이후 최종적으로 사용자에게 애플리케이션의 PDU인 메시지로 전달됨***

---
### 이미지 출처
https://thebook.io/080326/

