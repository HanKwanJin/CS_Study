# 트랜잭션
- 트랜잭션은 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위
- 데이터베이스에 접근하는 방법은 쿼리이므로, 여러 개의 쿼리들을 하나로 묶는 단위이다.
- ACID로 불리는 4가지의 특징이 있다.
    - 원자성 (**A**tomicity)
    - 일관성 (**C**onsistency)
    - 격리성 (**I**solation)
    - 지속성 (**D**urability)

## 원자성(Atomicity)
```
"All or Nothing"
```
- 트랜잭션과 관련된 일이 모두 수행되었거나 되지 않았거나를 보장하는 특징
    - 트랜잭션을 설정하면 중간에 커밋했는데, 문제가 생기면 롤백을 한다.
    - *문제가 발생해 롤백하는 경우 그 이후에 모두 수행되지 않음을 보장하는 것*
    - "All or Nothing"을 잘 생각해보면 된다. **"전부 다 실행되거나, 아예 일어나지 않거나"** 이다.
- 트랜잭션 단위로 여러 logic을 묶을 때 외부 API를 호출하는 것이 있으면 안됨
    - 롤백이 일어났을 때, 어떻게 해야 할 것인지에 대한 해결 방법이 있어야하고, 트랜잭션 전파를 신경 써서 관리해야함

### 커밋과 롤백
- 커밋(Commit)
    - 여러 쿼리가 성공적으로 처리되었다고 확정하는 명령어
    - 트랜잭션 단위로 수행되며, 변경된 내용이 모두 영구적으로 저장되는 것을 말함
    - "커밋이 수행되었다" = "하나의 트랜잭션이 성공적으로 수행되었다"
- 롤백(Rollback)
    - 에러나 여러 이슈 때문에 트랜잭션 전으로 돌려야 할 때 사용
    - 트랜잭션으로 처리한 하나의 묶음 과정을 일어나기 전으로 돌림(취소)

위와 같이 커밋과 롤백 덕에 데이터의 무결성이 보장된다. 또한, 변경 전에 변경 사항을 쉽게 확인할 수 있고 해당 작업을 그룹화할 수 있다.<br>

트랜잭션이 끝나는 가장 큰 이유는 트랜잭션이 커밋 또는 롤백되는 순간이라고 할 수 있다. 또한 허망하게 다 날리는 것을 방지하기 위한 Savepoint도 있다.

### 트랜잭션 전파
트랜잭션을 수행할 때 커넥션 단위로 수행하기 때문에 커넥션 객체를 넘겨서 수행해야 한다. 하지만 매번 넘겨줄 수는 없어서 넘겨서 수행하지 않고, 여러 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록 하는 것<br>
즉,
- 어떤 트랜잭션이 동작 중인 과정에서 다른 트랜잭션을 실행할 경우 어떻게 처리하는가?

이다.